<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Correa: reporters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Correa<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">C++ library with Python bindings to analyse the shape                             of simple closed curves in R^2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">reporters </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="top"></a> </p>
<h1><a class="anchor" id="autotoc_md472"></a>
Reporters</h1>
<p>Reporters are a customization point for most of Catch2's output, e.g. formatting and writing out <a href="reporter-events.md#top">assertions (whether passing or failing), sections, test cases, benchmarks, and so on</a>.</p>
<p>Catch2 comes with a bunch of reporters by default (currently 8), and you can also write your own reporter. Because multiple reporters can be active at the same time, your own reporters do not even have to handle all reporter event, just the ones you are interested in, e.g. benchmarks.</p>
<h2><a class="anchor" id="autotoc_md473"></a>
Using different reporters</h2>
<p>You can see which reporters are available by running the test binary with <code>--list-reporters</code>. You can then pick one of them with the <a href="command-line.md#choosing-a-reporter-to-use"><code>-r</code>, <code>--reporter</code> option</a>, followed by the name of the desired reporter, like so:</p>
<div class="fragment"><div class="line">--reporter xml</div>
</div><!-- fragment --><p>You can also select multiple reporters to be used at the same time. In that case you should read the <a class="el" href="md_ext_2hera_2extern_2_catch2_2docs_2reporters.html#multiple-reporters">section on using multiple reporters</a> to avoid any surprises from doing so.</p>
<p><a class="anchor" id="multiple-reporters"></a> </p>
<h2><a class="anchor" id="autotoc_md474"></a>
Using multiple reporters</h2>
<blockquote class="doxtable">
<p>&zwj;Support for having multiple parallel reporters was <a href="https://github.com/catchorg/Catch2/pull/2183">introduced</a> in Catch2 X.Y.Z </p>
</blockquote>
<p>Catch2 supports using multiple reporters at the same time while having them write into different destinations. The two main uses of this are</p>
<ul>
<li>having both human-friendly and machine-parseable (e.g. in JUnit format) output from one run of binary</li>
<li>having "partial" reporters that are highly specialized, e.g. having one reporter that writes out benchmark results as markdown tables and does nothing else, while also having standard testing output separately</li>
</ul>
<p>Specifying multiple reporter looks like this: </p><div class="fragment"><div class="line">--reporter console::- --reporter JUnit::result-junit.xml</div>
</div><!-- fragment --><p>Using multiple reporters (or one reporter and one-or-more <a href="event-listener.md#top">event listeners</a>) can have surprisingly complex semantics when using customization points provided to reporters by Catch2, namely capturing stdout/stderr from test cases.</p>
<p>As long as at least one reporter (or listener) asks Catch2 to capture stdout/stderr, captured stdout and stderr will be available to all reporters and listeners.</p>
<p>Because this might be surprising to the users, if at least one active <em>reporter</em> is non-capturing, then Catch2 tries to roughly emulate non-capturing behaviour by printing out the captured stdout/stderr just before <code>testCasePartialEnded</code> event is sent out to the active reporters and listeners. This means that stdout/stderr is no longer printed out from tests as it is being written, but instead it is written out in batch after each runthrough of a test case is finished.</p>
<h2><a class="anchor" id="autotoc_md475"></a>
Writing your own reporter</h2>
<p>You can also write your own custom reporter and tell Catch2 to use it. When writing your reporter, you have two options:</p>
<ul>
<li>Derive from <code><a class="el" href="struct_catch_1_1_i_streaming_reporter.html" title="The common base for all reporters and event listeners.">Catch::IStreamingReporter</a></code>. When doing this, you will have to provide handling for all <a href="reporter-events.md#top">reporter events</a>.</li>
<li>Derive from one of the provided utility reporter bases in Catch2.</li>
</ul>
<p>Generally we recommend doing the latter, as it is less work.</p>
<p>Apart from overriding handling of the individual reporter events, reporters have access to some extra customization points, described below.</p>
<h3><a class="anchor" id="autotoc_md476"></a>
Utility reporter bases</h3>
<p>Catch2 currently provides two utility reporter bases:</p>
<ul>
<li><code><a class="el" href="class_catch_1_1_streaming_reporter_base.html">Catch::StreamingReporterBase</a></code></li>
<li><code><a class="el" href="class_catch_1_1_cumulative_reporter_base.html">Catch::CumulativeReporterBase</a></code></li>
</ul>
<p><code>StreamingReporterBase</code> is useful for reporters that can format and write out the events as they come in. It provides (usually empty) implementation for all reporter events, and if you let it handle the relevant events, it also handles storing information about active test run and test case.</p>
<p><code>CumulativeReporterBase</code> is a base for reporters that need to see the whole test run, before they can start writing the output, such as the JUnit and SonarQube reporters. This post-facto approach requires the assertions to be stringified when it is finished, so that the assertion can be written out later. Because the stringification can be expensive, and not all cumulative reporters need the assertions, this base provides customization point to change whether the assertions are saved or not, separate for passing and failing assertions.</p>
<p><em>Generally we recommend that if you override a member function from either of the bases, you call into the base's implementation first. This is not necessarily in all cases, but it is safer and easier.</em></p>
<p>Writing your own reporter then looks like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;catch2/reporters/catch_reporter_streaming_base.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;catch2/catch_test_case_info.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;catch2/reporters/catch_reporter_registrars.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_partial_reporter.html">PartialReporter</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_catch_1_1_streaming_reporter_base.html">Catch::StreamingReporterBase</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">using </span>StreamingReporterBase::StreamingReporterBase;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> std::string getDescription() {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Reporter for testing TestCasePartialStarting/Ended events&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="class_partial_reporter.html#a54b22abca926ce4dcd0447c2524d1771">testCasePartialStarting</a>(<a class="code hl_struct" href="struct_catch_1_1_test_case_info.html">Catch::TestCaseInfo</a> <span class="keyword">const</span>&amp; testInfo,</div>
<div class="line">                                 uint64_t partNumber)<span class="keyword"> override </span>{</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;TestCaseStartingPartial: &quot;</span> &lt;&lt; testInfo.name &lt;&lt; <span class="charliteral">&#39;#&#39;</span> &lt;&lt; partNumber &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="class_partial_reporter.html#a7113defdea5894ef0704a9b02d51b0bc">testCasePartialEnded</a>(<a class="code hl_struct" href="struct_catch_1_1_test_case_stats.html">Catch::TestCaseStats</a> <span class="keyword">const</span>&amp; testCaseStats,</div>
<div class="line">                              uint64_t partNumber)<span class="keyword"> override </span>{</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;TestCasePartialEnded: &quot;</span> &lt;&lt; testCaseStats.testInfo-&gt;name &lt;&lt; <span class="charliteral">&#39;#&#39;</span> &lt;&lt; partNumber &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">CATCH_REGISTER_REPORTER(<span class="stringliteral">&quot;partial&quot;</span>, <a class="code hl_class" href="class_partial_reporter.html">PartialReporter</a>)</div>
<div class="ttc" id="aclass_catch_1_1_streaming_reporter_base_html"><div class="ttname"><a href="class_catch_1_1_streaming_reporter_base.html">Catch::StreamingReporterBase</a></div><div class="ttdef"><b>Definition:</b> catch_amalgamated.hpp:10799</div></div>
<div class="ttc" id="aclass_partial_reporter_html"><div class="ttname"><a href="class_partial_reporter.html">PartialReporter</a></div><div class="ttdef"><b>Definition:</b> X21-PartialTestCaseEvents.cpp:30</div></div>
<div class="ttc" id="aclass_partial_reporter_html_a54b22abca926ce4dcd0447c2524d1771"><div class="ttname"><a href="class_partial_reporter.html#a54b22abca926ce4dcd0447c2524d1771">PartialReporter::testCasePartialStarting</a></div><div class="ttdeci">void testCasePartialStarting(TestCaseInfo const &amp;testInfo, uint64_t partNumber) override</div><div class="ttdoc">Called every time a TEST_CASE is entered, including repeats (due to sections)</div><div class="ttdef"><b>Definition:</b> X21-PartialTestCaseEvents.cpp:45</div></div>
<div class="ttc" id="aclass_partial_reporter_html_a7113defdea5894ef0704a9b02d51b0bc"><div class="ttname"><a href="class_partial_reporter.html#a7113defdea5894ef0704a9b02d51b0bc">PartialReporter::testCasePartialEnded</a></div><div class="ttdeci">void testCasePartialEnded(TestCaseStats const &amp;testCaseStats, uint64_t partNumber) override</div><div class="ttdoc">Called every time a TEST_CASE is entered, including repeats (due to sections)</div><div class="ttdef"><b>Definition:</b> X21-PartialTestCaseEvents.cpp:51</div></div>
<div class="ttc" id="astruct_catch_1_1_test_case_info_html"><div class="ttname"><a href="struct_catch_1_1_test_case_info.html">Catch::TestCaseInfo</a></div><div class="ttdef"><b>Definition:</b> catch_amalgamated.hpp:6588</div></div>
<div class="ttc" id="astruct_catch_1_1_test_case_stats_html"><div class="ttname"><a href="struct_catch_1_1_test_case_stats.html">Catch::TestCaseStats</a></div><div class="ttdef"><b>Definition:</b> catch_amalgamated.hpp:1335</div></div>
</div><!-- fragment --><p>This create a simple reporter that responds to <code>testCasePartial*</code> events, and calls itself "partial" reporter, so it can be invoked with <code>--reporter partial</code> command line flag.</p>
<h3><a class="anchor" id="autotoc_md477"></a>
&lt;tt&gt;ReporterPreferences&lt;/tt&gt;</h3>
<p>Each reporter instance contains instance of <code>ReporterPreferences</code>, a type that holds flags for the behaviour of Catch2 when this reporter run. Currently there are two customization options:</p>
<ul>
<li><code>shouldRedirectStdOut</code> - whether the reporter wants to handle writes to stdout/stderr from user code, or not. This is useful for reporters that output machine-parseable output, e.g. the JUnit reporter, or the XML reporter.</li>
<li><code>shouldReportAllAssertions</code> - whether the reporter wants to handle <code>assertionEnded</code> events for passing assertions as well as failing assertions. Usually reporters do not report successful assertions and don't need them for their output, but sometimes the desired output format includes passing assertions even without the <code>-s</code> flag.</li>
</ul>
<h3><a class="anchor" id="autotoc_md478"></a>
Other expected functionality of a reporter</h3>
<p>When writing a custom reporter, there are few more things that you should keep in mind. These are not important for correctness, but they are important for the reporter to work <em>nicely</em>.</p>
<ul>
<li>Catch2 provides a simple verbosity option for users. There are three verbosity levels, "quiet", "normal", and "high", and if it makes sense for reporter's output format, it should respond to these by changing what, and how much, it writes out.</li>
<li>Catch2 operates with an rng-seed. Knowing what seed a test run had is important if you want to replicate it, so your reporter should report the rng-seed, if at all possible given the target output format.</li>
<li>Catch2 also operates with test filters, or test specs. If a filter is present, you should also report the filter, if at all possible given the target output format.</li>
</ul>
<hr  />
<p><a href="Readme.md#top">Home</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
