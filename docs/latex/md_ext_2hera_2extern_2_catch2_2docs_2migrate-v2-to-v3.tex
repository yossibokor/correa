\label{index_top}%
\Hypertarget{index_top}%
 \hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md175}{}\doxysection{Migrating from v2 to v3}\label{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md175}
v3 is the next major version of Catch2 and brings three significant changes\+:
\begin{DoxyItemize}
\item Catch2 is now split into multiple headers
\item Catch2 is now compiled as a static library
\item C++14 is the minimum required C++ version
\end{DoxyItemize}

There are many reasons why we decided to go from the old single-\/header distribution model to a more standard library distribution model. The big one is compile-\/time performance, but moving over to a split header distribution model also improves the future maintainability and extendability of the codebase. For example v3 adds a new kind of matchers without impacting the compilation times of users that do not use matchers in their tests. The new model is also more friendly towards package managers, such as vcpkg and Conan.

The result of this move is a significant improvement in compilation times, e.\+g. the inclusion overhead of Catch2 in the common case has been reduced by roughly 80\%. The improved ease of maintenance also led to various runtime performance improvements and the introduction of new features. For details, look at \href{release-notes.md\#301}{\texttt{ the release notes of 3.\+0.\+1}}.

{\itshape Note that we still provide one header + one TU distribution but do not consider it the primarily supported option. You should also expect that the compilation times will be worse if you use this option.}\hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md176}{}\doxysubsection{How to migrate projects from v2 to v3}\label{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md176}
To migrate to v3, there are two basic approaches to do so.


\begin{DoxyEnumerate}
\item Use {\ttfamily \doxylink{catch__amalgamated_8hpp}{catch\+\_\+amalgamated.\+hpp}} and {\ttfamily \doxylink{catch__amalgamated_8cpp}{catch\+\_\+amalgamated.\+cpp}}.
\item Build Catch2 as a proper (static) library, and move to piecewise headers
\end{DoxyEnumerate}

Doing 1 means downloading the \href{/extras/catch_amalgamated.hpp}{\texttt{ amalgamated header}} and the \href{/extras/catch_amalgamated.cpp}{\texttt{ amalgamated sources}} from {\ttfamily extras}, dropping them into your test project, and rewriting your includes from {\ttfamily \texorpdfstring{$<$}{<}catch2/catch.\+hpp\texorpdfstring{$>$}{>}} to {\ttfamily \char`\"{}catch\+\_\+amalgamated.\+hpp\char`\"{}} (or something similar, based on how you set up your paths).

The disadvantage of using this approach are increased compilation times, at least compared to the second approach, but it does let you avoid dealing with consuming libraries in your build system of choice.

However, we recommend doing 2, and taking extra time to migrate to v3 properly. This lets you reap the benefits of significantly improved compilation times in the v3 version. The basic steps to do so are\+:


\begin{DoxyEnumerate}
\item Change your CMake\+Lists.\+txt to link against {\ttfamily Catch2\+With\+Main} target if you use Catch2\textquotesingle{}s default main. (If you do not, keep linking against the {\ttfamily Catch2} target.)
\item Delete TU with {\ttfamily CATCH\+\_\+\+CONFIG\+\_\+\+RUNNER} or {\ttfamily CATCH\+\_\+\+CONFIG\+\_\+\+MAIN} defined, as it is no longer needed.
\item Change {\ttfamily \#include \texorpdfstring{$<$}{<}catch2/catch.\+hpp\texorpdfstring{$>$}{>}} to {\ttfamily \#include \texorpdfstring{$<$}{<}\doxylink{catch__all_8hpp}{catch2/catch\+\_\+all.\+hpp}\texorpdfstring{$>$}{>}}
\item Check that everything compiles. You might have to modify namespaces, or perform some other changes (see the Things that can break during porting section for the most common things).
\item Start migrating your test TUs from including {\ttfamily \texorpdfstring{$<$}{<}\doxylink{catch__all_8hpp}{catch2/catch\+\_\+all.\+hpp}\texorpdfstring{$>$}{>}} to piecemeal includes. You will likely want to start by including {\ttfamily \texorpdfstring{$<$}{<}catch2/catch\+\_\+test\+\_\+macros.\+hpp\texorpdfstring{$>$}{>}}, and then go from there. (see other notes for further ideas)
\end{DoxyEnumerate}\hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md177}{}\doxysubsection{Other notes}\label{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md177}

\begin{DoxyItemize}
\item The main test include is now {\ttfamily \texorpdfstring{$<$}{<}catch2/catch\+\_\+test\+\_\+macros.\+hpp\texorpdfstring{$>$}{>}}
\item \doxylink{struct_big}{Big} \char`\"{}subparts\char`\"{} like Matchers, or Generators, have their own folder, and also their own \char`\"{}big header\char`\"{}, so if you just want to include all matchers, you can include {\ttfamily \texorpdfstring{$<$}{<}\doxylink{catch__matchers__all_8hpp}{catch2/matchers/catch\+\_\+matchers\+\_\+all.\+hpp}\texorpdfstring{$>$}{>}}, or {\ttfamily \texorpdfstring{$<$}{<}\doxylink{catch__generators__all_8hpp}{catch2/generators/catch\+\_\+generators\+\_\+all.\+hpp}\texorpdfstring{$>$}{>}}
\end{DoxyItemize}\hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md178}{}\doxysubsection{Things that can break during porting}\label{md_ext_2hera_2extern_2_catch2_2docs_2migrate-v2-to-v3_autotoc_md178}

\begin{DoxyItemize}
\item The namespace on Matchers were cleaned up, they are no longer first declared deep within an internal namespace and then brought up. All Matchers now live in {\ttfamily Catch\+::\+Matchers}.
\item The reporter interfaces changed in a breaking manner. If you wrote custom reporter or listener, you might need to modify them a bit.
\end{DoxyItemize}

\DoxyHorRuler{0}


\href{Readme.md\#top}{\texttt{ Home}} 