\label{index_top}%
\Hypertarget{index_top}%
 \hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md490}{}\doxysection{Test fixtures}\label{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md490}
\hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md491}{}\doxysubsection{Defining test fixtures}\label{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md491}
Although Catch allows you to group tests together as sections within a test case, it can still be convenient, sometimes, to group them using a more traditional test fixture. Catch fully supports this too. You define the test fixture as a simple structure\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{keyword}{class\ }\mbox{\hyperlink{class_unique_tests_fixture}{UniqueTestsFixture}}\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ uniqueID;}
\DoxyCodeLine{\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\ \ \ \mbox{\hyperlink{class_d_b_connection}{DBConnection}}\ conn;}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \mbox{\hyperlink{class_unique_tests_fixture}{UniqueTestsFixture}}()\ :\ conn(\mbox{\hyperlink{class_d_b_connection}{DBConnection}}::createConnection(\textcolor{stringliteral}{"{}myDB"{}}))\ \{}
\DoxyCodeLine{\ \ \ \}}
\DoxyCodeLine{\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\ \ \ \textcolor{keywordtype}{int}\ getID()\ \{}
\DoxyCodeLine{\ \ \ \ \ \textcolor{keywordflow}{return}\ ++uniqueID;}
\DoxyCodeLine{\ \ \ \}}
\DoxyCodeLine{\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \textcolor{keywordtype}{int}\ UniqueTestsFixture::uniqueID\ =\ 0;}
\DoxyCodeLine{}
\DoxyCodeLine{\ TEST\_CASE\_METHOD(\mbox{\hyperlink{class_unique_tests_fixture}{UniqueTestsFixture}},\ \textcolor{stringliteral}{"{}Create\ Employee/No\ Name"{}},\ \textcolor{stringliteral}{"{}[create]"{}})\ \{}
\DoxyCodeLine{\ \ \ REQUIRE\_THROWS(conn.executeSQL(\textcolor{stringliteral}{"{}INSERT\ INTO\ employee\ (id,\ name)\ VALUES\ (?,\ ?)"{}},\ getID(),\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\ \}}
\DoxyCodeLine{\ TEST\_CASE\_METHOD(\mbox{\hyperlink{class_unique_tests_fixture}{UniqueTestsFixture}},\ \textcolor{stringliteral}{"{}Create\ Employee/Normal"{}},\ \textcolor{stringliteral}{"{}[create]"{}})\ \{}
\DoxyCodeLine{\ \ \ REQUIRE(conn.executeSQL(\textcolor{stringliteral}{"{}INSERT\ INTO\ employee\ (id,\ name)\ VALUES\ (?,\ ?)"{}},\ getID(),\ \textcolor{stringliteral}{"{}Joe\ Bloggs"{}}));}
\DoxyCodeLine{\ \}}

\end{DoxyCode}


The two test cases here will create uniquely-\/named derived classes of \doxylink{class_unique_tests_fixture}{Unique\+Tests\+Fixture} and thus can access the {\ttfamily get\+ID()} protected method and {\ttfamily conn} member variables. This ensures that both the test cases are able to create a \doxylink{class_d_b_connection}{DBConnection} using the same method (DRY principle) and that any ID\textquotesingle{}s created are unique such that the order that tests are executed does not matter.

Catch2 also provides {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} and {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} that can be used together with templated fixtures and templated template fixtures to perform tests for multiple different types. Unlike {\ttfamily TEST\+\_\+\+CASE\+\_\+\+METHOD}, {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} and {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} do require the tag specification to be non-\/empty, as it is followed by further macro arguments.

Also note that, because of limitations of the C++ preprocessor, if you want to specify a type with multiple template parameters, you need to enclose it in parentheses, e.\+g. {\ttfamily std\+::map\texorpdfstring{$<$}{<}int, std\+::string\texorpdfstring{$>$}{>}} needs to be passed as {\ttfamily (std\+::map\texorpdfstring{$<$}{<}int, std\+::string\texorpdfstring{$>$}{>})}. In the case of {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD}, if a member of the type list should consist of more than single type, it needs to be enclosed in another pair of parentheses, e.\+g. {\ttfamily (std\+::map, std\+::pair)} and {\ttfamily ((int, float), (char, double))}.

\doxylink{struct_example}{Example}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T\ >}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Template\_Fixture\ \{}
\DoxyCodeLine{\ \ \ \ Template\_Fixture():\ m\_a(1)\ \{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ T\ m\_a;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{TEMPLATE\_TEST\_CASE\_METHOD(Template\_Fixture,\textcolor{stringliteral}{"{}A\ TEMPLATE\_TEST\_CASE\_METHOD\ based\ test\ run\ that\ succeeds"{}},\ \textcolor{stringliteral}{"{}[class][template]"{}},\ \textcolor{keywordtype}{int},\ \textcolor{keywordtype}{float},\ \textcolor{keywordtype}{double})\ \{}
\DoxyCodeLine{\ \ \ \ REQUIRE(\ Template\_Fixture<TestType>::m\_a\ ==\ 1\ );}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Template\_Template\_Fixture\ \{}
\DoxyCodeLine{\ \ \ \ Template\_Template\_Fixture()\ \{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ T\ m\_a;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Foo\_class\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{size\_t}\ size()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{TEMPLATE\_PRODUCT\_TEST\_CASE\_METHOD(Template\_Template\_Fixture,\ \textcolor{stringliteral}{"{}A\ TEMPLATE\_PRODUCT\_TEST\_CASE\_METHOD\ based\ test\ succeeds"{}},\ \textcolor{stringliteral}{"{}[class][template]"{}},\ (Foo\_class,\ std::vector),\ \textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{\ \ \ \ REQUIRE(\ Template\_Template\_Fixture<TestType>::m\_a.size()\ ==\ 0\ );}
\DoxyCodeLine{\}}

\end{DoxyCode}


{\itshape While there is an upper limit on the number of types you can specify in single {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} or {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD}, the limit is very high and should not be encountered in practice.}\hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md492}{}\doxysubsection{Signature-\/based parametrised test fixtures}\label{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md492}
\begin{quote}
\href{https://github.com/catchorg/Catch2/issues/1609}{\texttt{ Introduced}} in Catch2 2.\+8.\+0. \end{quote}
Catch2 also provides {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD\+\_\+\+SIG} and {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD\+\_\+\+SIG} to support fixtures using non-\/type template parameters. These test cases work similar to {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} and {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD}, with additional positional argument for \href{test-cases-and-sections.md\#signature-based-parametrised-test-cases}{\texttt{ signature}}.

\doxylink{struct_example}{Example}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Nttp\_Fixture\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ value\ =\ V;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{TEMPLATE\_TEST\_CASE\_METHOD\_SIG(Nttp\_Fixture,\ \textcolor{stringliteral}{"{}A\ TEMPLATE\_TEST\_CASE\_METHOD\_SIG\ based\ test\ run\ that\ succeeds"{}},\ \textcolor{stringliteral}{"{}[class][template][nttp]"{}},((\textcolor{keywordtype}{int}\ V),\ V),\ 1,\ 3,\ 6)\ \{}
\DoxyCodeLine{\ \ \ \ REQUIRE(Nttp\_Fixture<V>::value\ >\ 0);}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Template\_Fixture\_2\ \{}
\DoxyCodeLine{\ \ \ \ Template\_Fixture\_2()\ \{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ T\ m\_a;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\ \textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ V>}
\DoxyCodeLine{\textcolor{keyword}{struct\ }Template\_Foo\_2\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{size\_t}\ size()\ \{\ \textcolor{keywordflow}{return}\ V;\ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{TEMPLATE\_PRODUCT\_TEST\_CASE\_METHOD\_SIG(Template\_Fixture\_2,\ \textcolor{stringliteral}{"{}A\ TEMPLATE\_PRODUCT\_TEST\_CASE\_METHOD\_SIG\ based\ test\ run\ that\ succeeds"{}},\ \textcolor{stringliteral}{"{}[class][template][product][nttp]"{}},\ ((\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_s}{S}}),\ T,\ \mbox{\hyperlink{struct_s}{S}}),(std::array,\ Template\_Foo\_2),\ ((\textcolor{keywordtype}{int},2),\ (\textcolor{keywordtype}{float},6)))}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ REQUIRE(Template\_Fixture\_2<TestType>\{\}.m\_a.size()\ >=\ 2);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md493}{}\doxysubsection{Template fixtures with types specified in template type lists}\label{md_ext_2hera_2extern_2_catch2_2docs_2test-fixtures_autotoc_md493}
Catch2 also provides {\ttfamily TEMPLATE\+\_\+\+LIST\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD} to support template fixtures with types specified in template type lists like {\ttfamily std\+::tuple}, {\ttfamily boost\+::mpl\+::list} or {\ttfamily boost\+::mp11\+::mp\+\_\+list}. This test case works the same as {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE\+\_\+\+METHOD}, only difference is the source of types. This allows you to reuse the template type list in multiple test cases.

\doxylink{struct_example}{Example}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }MyTypes\ =\ std::tuple<int,\ char,\ double>;}
\DoxyCodeLine{TEMPLATE\_LIST\_TEST\_CASE\_METHOD(Template\_Fixture,\ \textcolor{stringliteral}{"{}Template\ test\ case\ method\ with\ test\ types\ specified\ inside\ std::tuple"{}},\ \textcolor{stringliteral}{"{}[class][template][list]"{}},\ MyTypes)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ REQUIRE(\ Template\_Fixture<TestType>::m\_a\ ==\ 1\ );}
\DoxyCodeLine{\}}

\end{DoxyCode}


\DoxyHorRuler{0}


\href{Readme.md\#top}{\texttt{ Home}} 